<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Tra c·ª©u b√†n ti·ªác</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: radial-gradient(circle at top, #fdf2f8, #c7d2fe);
      min-height: 100vh;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .container {
      background: #ffffff;
      max-width: 460px;
      width: 100%;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      overflow: hidden;
      animation: fadeIn 0.6s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    header {
      background: linear-gradient(135deg, #ec4899, #8b5cf6);
      color: white;
      padding: 22px;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-size: 22px;
      letter-spacing: 0.5px;
    }
    header p {
      margin-top: 6px;
      font-size: 14px;
      opacity: 0.9;
    }
    .content {
      padding: 22px;
    }
    input {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border-radius: 12px;
      border: 1px solid #d1d5db;
      outline: none;
    }
    input:focus {
      border-color: #8b5cf6;
      box-shadow: 0 0 0 2px rgba(139,92,246,0.2);
    }
    button {
      width: 100%;
      margin-top: 14px;
      padding: 13px;
      font-size: 16px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, #8b5cf6, #6366f1);
      color: white;
    }
    button:hover {
      opacity: 0.95;
    }
    .result {
      margin-top: 18px;
      text-align: center;
      font-size: 16px;
    }
    .success {
      background: #f0f9ff;
      border-radius: 14px;
      padding: 14px;
    }
    .error {
      color: #dc2626;
      font-size: 15px;
    }
    .seat-map {
      margin-top: 16px;
    }
    .seat-map img {
      width: 100%;
      border-radius: 14px;
      border: 1px solid #e5e7eb;
      cursor: zoom-in;
    }
    footer {
      text-align: center;
      padding: 14px;
      font-size: 12px;
      color: #6b7280;
      background: #fafafa;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üå∏ Tra c·ª©u b√†n ti·ªác üå∏</h1>
      <p>Vui l√≤ng nh·∫≠p t√™n / user c·ªßa b·∫°n</p>
    </header>

    <div class="content">
      <input
        type="text"
        id="username"
        placeholder="V√≠ d·ª•: an, binh, chi..."
        onkeydown="if(event.key==='Enter') traCuu()"
      />

      <button onclick="traCuu()">Tra c·ª©u ch·ªó ng·ªìi</button>

      <div class="result" id="result">‚è≥ ƒêang t·∫£i d·ªØ li·ªáu...</div>
    </div>

    <footer>
      Vui l√≤ng ng·ªìi ƒë√∫ng b√†n ƒë·ªÉ bu·ªïi ti·ªác di·ªÖn ra tr·ªçn v·∫πn üíñ
    </footer>
  </div>

  <script>
    /* ================== C·∫§U H√åNH ==================
       Google Sheet (CSV)
       3 c·ªôt KH√îNG C√ì TI√äU ƒê·ªÄ:
       user | ban | mayman
    ================================================= */

    const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTnWMIpqfGOMbFPWl4_8JIBEpqnv71DmrsBimq6bxEQO8FAPVeI1X2NuVqFH-qxmBn9TPs5e2eunJ7O/pub?gid=0&single=true&output=csv";

    // LINK ·∫¢NH S∆† ƒê·ªí CH·ªñ NG·ªíI (PNG/JPG)
    const SEAT_MAP_IMAGE = "https://minhhieuhrghtk.github.io/minhhieuhrghtk/tracuutest/4f9e5ec7e3d629f040fb15c0a7e4ac5b8cca5949/Screenshot%202026-01-14%20115308.png";

    const data = {};
    const resultDiv = document.getElementById('result');

    fetch(SHEET_URL)
      .then(res => res.text())
      .then(text => {
        const lines = text.trim().split(/\r?\n/);
        lines.forEach(line => {
          const parts = line.split(',');
          if (parts.length >= 3) {
            const user = parts[0].trim().toLowerCase();
            data[user] = {
              ban: parts[1].trim(),
              mayMan: parts[2].trim()
            };
          }
        });
        resultDiv.textContent = '‚ú® D·ªØ li·ªáu s·∫µn s√†ng ƒë·ªÉ tra c·ª©u';
      })
      .catch(() => {
        resultDiv.innerHTML = '<div class="error">‚ùå Kh√¥ng t·∫£i ƒë∆∞·ª£c d·ªØ li·ªáu</div>';
      });

    function traCuu() {
      const user = document.getElementById('username').value.trim().toLowerCase();
      if (!user) {
        resultDiv.innerHTML = '<div class="error">Vui l√≤ng nh·∫≠p user</div>';
        return;
      }
      if (data[user]) {
        resultDiv.innerHTML = `
          <div class="success">
            üéâ <b>${user}</b><br><br>
            ü™ë <b>B√†n:</b> ${data[user].ban}<br>
            üçÄ <b>S·ªë may m·∫Øn:</b> ${data[user].mayMan}
            <div class="seat-map">
              <p style="margin:10px 0 6px;font-size:14px;">üìç S∆° ƒë·ªì ch·ªó ng·ªìi</p>
              <img src="${SEAT_MAP_IMAGE}" alt="S∆° ƒë·ªì ch·ªó ng·ªìi">
            </div>
          </div>
        `;
      } else {
        resultDiv.innerHTML = '<div class="error">‚ùå Kh√¥ng t√¨m th·∫•y th√¥ng tin c·ªßa b·∫°n</div>';
      }
    }
  </script>
</body>
</html>
