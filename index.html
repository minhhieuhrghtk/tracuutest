<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Tra c·ª©u b√†n ti·ªác (ƒê·ªìng b·ªô)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #74ebd5, #acb6e5);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
    }
    .card {
      background: #fff;
      padding: 24px;
      border-radius: 14px;
      width: 100%;
      max-width: 440px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    h1 { text-align: center; margin-bottom: 6px; }
    .subtitle { text-align: center; font-size: 14px; color: #555; margin-bottom: 16px; }
    input {
      width: 100%; padding: 10px; font-size: 15px;
      border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box;
    }
    button {
      width: 100%; padding: 11px; font-size: 16px; border-radius: 8px;
      border: none; cursor: pointer; background: #4f46e5; color: #fff; margin-top: 10px;
    }
    .result { margin-top: 16px; text-align: center; font-size: 16px; }
    .success { background: #ecfeff; padding: 12px; border-radius: 10px; }
    .error { color: #dc2626; }
    footer { text-align: center; margin-top: 16px; font-size: 12px; color: #888; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Tra c·ª©u b√†n ti·ªác</h1>
    <div class="subtitle">D·ªØ li·ªáu ƒë·ªìng b·ªô t·ª´ Google Sheet</div>

    <input
      type="text"
      id="username"
      placeholder="Nh·∫≠p user ƒë·ªÉ tra c·ª©u"
      onkeydown="if(event.key==='Enter') traCuu()"
    />

    <button onclick="traCuu()">Tra c·ª©u</button>

    <div class="result" id="result">‚è≥ ƒêang t·∫£i d·ªØ li·ªáu...</div>

    <footer>
      ƒê·ªìng b·ªô ƒëa thi·∫øt b·ªã ‚Äì mi·ªÖn ph√≠ ‚Äì GitHub Pages
    </footer>
  </div>

  <script>
    /* ================== C·∫§U H√åNH ==================
       B∆Ø·ªöC 1: T·∫°o Google Sheet
       B∆Ø·ªöC 2: Share ‚Üí Anyone with the link ‚Üí Viewer
       B∆Ø·ªöC 3: File ‚Üí Share ‚Üí Publish to web ‚Üí CSV
       B∆Ø·ªöC 4: D√°n link CSV v√†o bi·∫øn SHEET_URL b√™n d∆∞·ªõi
       Sheet ph·∫£i c√≥ 3 c·ªôt KH√îNG C√ì D√íNG TI√äU ƒê·ªÄ:
       user | ban | mayman
    ================================================= */

    const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTnWMIpqfGOMbFPWl4_8JIBEpqnv71DmrsBimq6bxEQO8FAPVeI1X2NuVqFH-qxmBn9TPs5e2eunJ7O/pub?gid=0&single=true&output=csv";

    const data = {};
    const resultDiv = document.getElementById('result');

    fetch(SHEET_URL)
      .then(res => res.text())
      .then(text => {
        const lines = text.trim().split(/\r?\n/);
        lines.forEach(line => {
          const parts = line.split(',');
          if (parts.length >= 3) {
            const user = parts[0].trim().toLowerCase();
            data[user] = {
              ban: parts[1].trim(),
              mayMan: parts[2].trim()
            };
          }
        });
        resultDiv.textContent = '‚úÖ D·ªØ li·ªáu ƒë√£ s·∫µn s√†ng ƒë·ªÉ tra c·ª©u';
      })
      .catch(() => {
        resultDiv.innerHTML = '<div class="error">‚ùå Kh√¥ng t·∫£i ƒë∆∞·ª£c d·ªØ li·ªáu</div>';
      });

    function traCuu() {
      const user = document.getElementById('username').value.trim().toLowerCase();
      if (!user) {
        resultDiv.innerHTML = '<div class="error">Vui l√≤ng nh·∫≠p user</div>';
        return;
      }
      if (data[user]) {
        resultDiv.innerHTML = `
          <div class="success">
            üéâ <b>${user}</b><br><br>
            ü™ë B√†n: <b>${data[user].ban}</b><br>
            üçÄ S·ªë may m·∫Øn: <b>${data[user].mayMan}</b>
          </div>
        `;
      } else {
        resultDiv.innerHTML = '<div class="error">‚ùå Kh√¥ng t√¨m th·∫•y user</div>';
      }
    }
  </script>
</body>
</html>
